{"version":3,"sources":["webpack:///./src/pages/contact.jsx"],"names":["ContactPage","React","Component","constructor","props","super","this","state","form","name","message","valid","render","data","location","siteTitle","site","siteMetadata","title","className","action","method","enctype","onSubmit","handleSubmit","bind","class","for","id","value","onChange","handleChange","type","placeholder","maxLength","rows","disabled","e","setState","target","preventDefault","FormData","append","document","getElementById","files","result","fetch","body","json","alert","console","log","pageQuery"],"mappings":"2FAAA,kGAMA,MAAMA,UAAoBC,IAAMC,UAC9BC,YAAYC,GACVC,MAAMD,GACNE,KAAKC,MAAQ,CACXC,KAAM,CACJC,KAAM,GACNC,QAAS,IAEXC,OAAO,GAGXC,SACE,IAAI,KAAEC,EAAF,SAAQC,GAAaR,KAAKF,MAC9B,MAAMW,EAAYF,EAAKG,KAAKC,aAAaC,MAEzC,OACE,kBAAC,IAAD,CAAQJ,SAAUA,EAAUI,MAAOH,GACjC,kBAAC,IAAD,CAAKG,MAAM,YAEX,wBAAIC,UAAU,4BAAd,gBACA,0BACEC,OAAO,wCACPC,OAAO,OACPF,UAAU,mBACVG,QAAQ,sBACRC,SAAUjB,KAAKkB,aAAaC,KAAKnB,OAGjC,yBAAKoB,MAAM,QACT,2BACEA,MAAM,yDACNC,IAAI,QAFN,kBAMA,2BACED,MAAM,6HACNE,GAAG,OACHC,MAAOvB,KAAKC,MAAMC,KAAKC,KACvBqB,SAAUxB,KAAKyB,aAAaN,KAAKnB,MACjC0B,KAAK,OACLC,YAAY,aACZxB,KAAK,OACLyB,UAAU,SAId,yBAAKR,MAAM,QACT,2BACEA,MAAM,0DACNC,IAAI,WAFN,WAMA,8BACED,MAAM,sIACNE,GAAG,UACHK,YAAY,UACZH,SAAUxB,KAAKyB,aAAaN,KAAKnB,MACjCuB,MAAOvB,KAAKC,MAAMC,KAAKE,QACvBD,KAAK,UACL0B,KAAK,IACLD,UAAU,UAId,yBAAKR,MAAM,QACT,2BACEA,MAAM,yDACNC,IAAI,QAFN,QAMA,2BACED,MAAM,6HACNE,GAAG,OACHI,KAAK,OACLC,YAAY,OACZxB,KAAK,UAGT,yBAAKiB,MAAM,oBACT,2BACEP,UAAU,kHACVa,KAAK,SACLH,MAAM,SACNO,UAAW9B,KAAKC,MAAMI,WAOlCoB,aAAaM,GACX/B,KAAKgC,SAAS,CAAE9B,KAAM,IAAKF,KAAKC,MAAMC,KAAM,CAAC6B,EAAEE,OAAOX,IAAKS,EAAEE,OAAOV,SACpEvB,KAAKgC,SAAS,CACZ3B,MAAmC,IAA3BL,KAAKC,MAAMC,KAAKE,QAA0C,IAAxBJ,KAAKC,MAAMC,KAAKC,OAG9D,mBAAmB4B,GACjBA,EAAEG,iBAEF,IAAI3B,EAAO,IAAI4B,SACf5B,EAAK6B,OAAO,OAAQpC,KAAKC,MAAMC,KAAKC,MACpCI,EAAK6B,OAAO,UAAWpC,KAAKC,MAAMC,KAAKE,SAC5BiC,SAASC,eAAe,QAAQC,MAAM,IAE/ChC,EAAK6B,OAAO,OAAQC,SAASC,eAAe,QAAQC,MAAM,IAG5D,IACE,IAAIC,QAAeC,MAAM,4CAA6C,CACpE1B,OAAQ,OACR2B,KAAMnC,IAEJoC,QAAaH,EAAOG,OACN,YAAdA,EAAKjB,KACPkB,MAAM,4EAENA,MACE,oGAGJC,QAAQC,IAAIH,GACZ,MAAOZ,GACPc,QAAQC,IAAIf,GACZa,MACE,sGAMOlD,YAER,MAAMqD,EAAS","file":"component---src-pages-contact-jsx-53768bf5d67e69c9cd8c.js","sourcesContent":["import React from \"react\"\nimport { graphql } from \"gatsby\"\n\nimport Layout from \"../layouts/layout.jsx\"\nimport SEO from \"../components/seo\"\n\nclass ContactPage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      form: {\n        name: \"\",\n        message: \"\",\n      },\n      valid: false,\n    }\n  }\n  render() {\n    let { data, location } = this.props\n    const siteTitle = data.site.siteMetadata.title\n\n    return (\n      <Layout location={location} title={siteTitle}>\n        <SEO title=\"Contact\" />\n        {/* Hero */}\n        <h1 className=\"m-5 text-2xl text-center\">Contact form</h1>\n        <form\n          action=\"https://frozen-feedback.herokuapp.com\"\n          method=\"POST\"\n          className=\"max-w-md mx-auto\"\n          enctype=\"multipart/form-data\"\n          onSubmit={this.handleSubmit.bind(this)}\n        >\n          {/* Name */}\n          <div class=\"mb-4\">\n            <label\n              class=\"block text-gray-700 text-md text-center font-bold mb-2\"\n              for=\"name\"\n            >\n              Name and Email\n            </label>\n            <input\n              class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"name\"\n              value={this.state.form.name}\n              onChange={this.handleChange.bind(this)}\n              type=\"text\"\n              placeholder=\"Name/Email\"\n              name=\"name\"\n              maxLength=\"200\"\n            />\n          </div>\n          {/* Message */}\n          <div class=\"mb-4\">\n            <label\n              class=\"block text-gray-700  text-md text-center font-bold mb-2\"\n              for=\"message\"\n            >\n              Message\n            </label>\n            <textarea\n              class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline resize-y\"\n              id=\"message\"\n              placeholder=\"Message\"\n              onChange={this.handleChange.bind(this)}\n              value={this.state.form.message}\n              name=\"message\"\n              rows=\"5\"\n              maxLength=\"3896\"\n            />\n          </div>\n          {/* Filename */}\n          <div class=\"mb-4\">\n            <label\n              class=\"block text-gray-700 text-md text-center font-bold mb-2\"\n              for=\"file\"\n            >\n              File\n            </label>\n            <input\n              class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              id=\"file\"\n              type=\"file\"\n              placeholder=\"File\"\n              name=\"file\"\n            />\n          </div>\n          <div class=\"mb-4 text-center\">\n            <input\n              className=\"bg-teal-500 text-white font-bold rounded-full py-4 px-8 shadow-lg uppercase tracking-wider disabled:opacity-75 \"\n              type=\"submit\"\n              value=\"Submit\"\n              disabled={!this.state.valid}\n            />\n          </div>\n        </form>\n      </Layout>\n    )\n  }\n  handleChange(e) {\n    this.setState({ form: { ...this.state.form, [e.target.id]: e.target.value } })\n    this.setState({\n      valid: (this.state.form.message != \"\") & (this.state.form.name != \"\"),\n    })\n  }\n  async handleSubmit(e) {\n    e.preventDefault()\n\n    let data = new FormData()\n    data.append(\"name\", this.state.form.name)\n    data.append(\"message\", this.state.form.message)\n    let file = document.getElementById(\"file\").files[0]\n    if (file) {\n      data.append(\"file\", document.getElementById(\"file\").files[0])\n    }\n\n    try {\n      let result = await fetch(\"https://frozen-feedback.herokuapp.com/api\", {\n        method: \"POST\",\n        body: data,\n      })\n      let json = await result.json()\n      if (json.type === \"success\") {\n        alert(\"Your message has been delivered! \\nThis site is still under construction\")\n      } else {\n        alert(\n          \"Something went wrong! Contact me on social media instead \\nThis site is still under construction\"\n        )\n      }\n      console.log(json)\n    } catch (e) {\n      console.log(e)\n      alert(\n        \"Something went wrong! Contact me on social media instead \\nThis site is still under construction\"\n      )\n    }\n  }\n}\n\nexport default ContactPage\n\nexport const pageQuery = graphql`\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\n      edges {\n        node {\n          excerpt\n          fields {\n            slug\n          }\n          frontmatter {\n            date(formatString: \"MMMM DD, YYYY\")\n            title\n            description\n          }\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}